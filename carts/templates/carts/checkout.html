{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block content %}

{% if not user_can_continue %}
<h1>Checkout</h1>
<div class='col-sm-6'>
	
<p class="lead">Continue As Guest</p>
<form method="POST" action=''>{% csrf_token %}
{{ form|crispy }}
<input type='submit' class='btn btn-success' value='Continue As Guest' />
</form>

</div>

<div class='col-sm-6'>
	<p class="lead">Login to Checkout</p>
<form method="POST" action="{% url 'auth_login' %}">{% csrf_token %}
{{ login_form|crispy }}
<input type="hidden" name="next" value='{{ next_url }}' />
<input type='submit' class='btn btn-success' value='Login' />
</form>

</div>
{% else %}
<h1></h1>
<div class='col-sm-4 col-sm-offset-4 text-center'>
<p class='lead'>
Order Summary</p>

<table class='table'>
<tr><td>{{ order.cart.cartitem_set.count }} Item(s): <br/>{% for i in order.cart.cartitem_set.all %}
<b>{{ i.item.get_title }}</b><br/>
{% endfor %}</td></tr>
<tr><td>Cart Subtotal: {{ order.cart.subtotal }}</td></tr>
<tr><td>Tax: {{ order.cart.tax_total }}</td></tr>
<tr><td>Items Total: {{ order.cart.total }}</td></tr>

<tr><td>Shipping: {{ order.shipping_total_price }}</td></tr>
<tr><td>Order Total: {{ order.order_total }}</td></tr>


</table>
</div>

<div class='col-sm-4 col-sm-offset-4 text-center'>
<p><b>Billing to</b>
<br/>
{{ order.billing_address.get_address }}
<p>
<p><b>Shipping to</b>
<br/>
{{ order.shipping_address.get_address }}
<p>
<br/>
<p><b>Complete Order</b>

<p>

</div>

{% endif %}
{% endblock %}